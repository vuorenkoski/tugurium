<IfModule mod_ssl.c>
<VirtualHost *:443>
	# Set correcy server nME
	ServerName tempview.vuorenkoski.fi

	ServerAdmin webmaster@localhost

        # Set correct path to front-build
        DocumentRoot /home/pi/tempview/tempview-front/build
        ProxyPass /api/ http://localhost:4000/
        ProxyPass /wss/ ws://localhost:4000/

	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined

        # Set correct path to fron build
        <Directory /home/pi/tempview/tempview-front/build>
          AllowOverride none
          Require all granted

          # Rewrite needed for react-router-dom browser URLs to work ok
          RewriteEngine on
          RewriteCond %{REQUEST_FILENAME} -f [OR]
          RewriteCond %{REQUEST_FILENAME} -d
          RewriteRule ^ - [L]
          RewriteRule ^ index.html [L]
        </Directory>

	# insert certificate files locations
        SSLEngine on
        SSLCertificateFile /etc/ssl/certs/path_to_ssl_certificate
        SSLCertificateKeyFile /etc/ssl/private/path_to_ssl_key
</VirtualHost>
</IfModule>
